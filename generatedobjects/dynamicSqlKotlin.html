<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/xhtml/generatedobjects/dynamicSqlKotlin.xhtml at 24 November 2019
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20191124" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MyBatis Generator Core &#x2013; MyBatis Dynamic SQL with Kotlin Usage Notes</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script type="text/javascript" src="../js/apache-maven-fluido-1.7.min.js"></script>
<link rel="stylesheet" type="text/css" href="../mbgstyle.css" />  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="../index.html" id="bannerLeft"><h2>MyBatis Generator</h2>
</a></div>
        <div class="pull-right"><a href="../../../" id="bannerRight" title="MyBatis logo"><img src="../../../images/mybatis-logo.png"  alt="MyBatis logo"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 24 November 2019<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.4.0</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">User's Guide</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../whatsNew.html" title="What's New?"><span class="none"></span>What's New?</a></li>
    <li><a href="../quickstart.html" title="Quick Start Guide"><span class="none"></span>Quick Start Guide</a></li>
    <li><a href="../running/running.html" title="Running MyBatis Generator"><span class="icon-chevron-right"></span>Running MyBatis Generator</a></li>
    <li><a href="../afterRunning.html" title="Tasks After Running MyBatis Generator"><span class="none"></span>Tasks After Running MyBatis Generator</a></li>
    <li><a href="../migratingFromIbator.html" title="Migrating from Ibator"><span class="none"></span>Migrating from Ibator</a></li>
    <li><a href="../migratingFromAbator.html" title="Migrating from Abator"><span class="none"></span>Migrating from Abator</a></li>
    <li><a href="../configreference/xmlconfig.html" title="XML Configuration Reference"><span class="icon-chevron-right"></span>XML Configuration Reference</a></li>
    <li><a href="../generatedobjects/results.html" title="Using the Generated Objects"><span class="icon-chevron-down"></span>Using the Generated Objects</a>
    <ul class="nav nav-list">
    <li><a href="../generatedobjects/dynamicSqlV2.html" title="MyBatis Dynamic SQL Usage Notes"><span class="none"></span>MyBatis Dynamic SQL Usage Notes</a></li>
    <li class="active"><a href="#"><span class="none"></span>MyBatis Dynamic SQL with Kotlin Usage Notes</a></li>
    <li><a href="../generatedobjects/legacy.html" title="Legacy Generators"><span class="icon-chevron-down"></span>Legacy Generators</a>
    <ul class="nav nav-list">
    <li><a href="../generatedobjects/javamodel.html" title="Java Model Objects"><span class="none"></span>Java Model Objects</a></li>
    <li><a href="../generatedobjects/sqlmap.html" title="SQL Map Files"><span class="none"></span>SQL Map Files</a></li>
    <li><a href="../generatedobjects/javaclient.html" title="Java Client Objects"><span class="none"></span>Java Client Objects</a></li>
    <li><a href="../generatedobjects/exampleClassUsage.html" title="Example Class Usage Notes"><span class="none"></span>Example Class Usage Notes</a></li>
    <li><a href="../generatedobjects/extendingExampleClass.html" title="Extending the Example Classes"><span class="none"></span>Extending the Example Classes</a></li>
    </ul>
</li>
    <li><a href="../generatedobjects/dynamicSqlV1.html" title="MyBatis Dynamic SQL Usage Notes - V1 (Deprecated)"><span class="none"></span>MyBatis Dynamic SQL Usage Notes - V1 (Deprecated)</a></li>
    </ul>
</li>
    <li><a href="../usage/intro.html" title="Database Specific Information"><span class="icon-chevron-right"></span>Database Specific Information</a></li>
    <li><a href="../reference/intro.html" title="Other Reference Information"><span class="icon-chevron-right"></span>Other Reference Information</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >




<h1>MyBatis Dynamic SQL with Kotlin Usage Notes</h1>

<p>This page is a short introduction to using the classes generated for the MyBatis3Kotlin runtime
These classes
are dependent on the <a class="externalLink" href="http://www.mybatis.org/mybatis-dynamic-sql/docs/introduction.html">MyBatis Dynamic SQL</a>
library version 1.1.4 or higher. Please refer to that site for full information
about how the library works. In particular, see the 
<a class="externalLink" href="https://mybatis.org/mybatis-dynamic-sql/docs/kotlinMyBatis3.html">Kotlin Usage Page</a> for full details.</p>


<div class="section">
<h2><a name="Generated_Files"></a>Generated Files</h2>

<p>For each introspected table, the generator will generate four Kotlin files:</p>

<ol style="list-style-type: decimal">
  
<li>A Kotlin data class that represents a row in the table. By default the class will be named based
    on the table name with &quot;Record&quot; appended</li>
  
<li>A &quot;support&quot; class that includes a table definition and column definitions for the database table</li>
  
<li>A mapper interface with the basic MyBatis mapper methods</li>
  
<li>A mapper extensions file with extension methods that simplify and reuse the methods in the basic interface.
  This is similar to the default interface methods generated in the other runtimes, but it is accomplished
  with extension methods in Kotlin. </li>
</ol>


<p>Important notes about the generated objects:</p>

<ul>
  
<li>No XML is generated</li>
  
<li>No separate &quot;Example&quot; class is generated</li>
  
<li>There are no separate &quot;with BLOBs&quot; and &quot;without BLOBs&quot; methods.  If your table includes BLOB fields, then
      they are included in all operations.</li>
  
<li>Model classes are always generated in the &quot;flat&quot; model meaning there is no separate primary key class or BLOBs class</li>
  
<li>Java 8 or higher is required</li>
  
<li>Any recent version of Kotlin should work</li>
  
<li>MyBatis 3.4.2 or higher is required</li>
  
<li>MyBatis Dynamic SQL 1.1.4 or higher is required</li>
</ul>

</div>
<div class="section">
<h2><a name="Format_of_the_.22Support.22_classes"></a>Format of the &quot;Support&quot; classes</h2>

<p>A &quot;support&quot; class is created for each table.  The support class includes a definition of the table and all the columns
in the table.  These items are used as input to the code generated in the mappers - most often for the where clauses you
will write.</p>


<p>For example, suppose there is a table &quot;TABLE_CODE&quot; in schema &quot;MYSCHEMA&quot;.  Further suppose that table has &quot;ID&quot; and
&quot;DESCRIPTION&quot; columns.  The generated support class will look like this: </p>


<div>
<pre>
package example

import java.sql.JDBCType
import org.mybatis.dynamic.sql.SqlTable

object TableCodeDynamicSqlSupport {
    object TableCode : SqlTable(&quot;MYSCHEMA.TABLE_CODE&quot;) {
        val id = column&lt;Int&gt;(&quot;ID&quot;, JDBCType.INTEGER)
        val description = column&lt;String&gt;(&quot;DESCRIPTION&quot;, JDBCType.VARCHAR)
    }
}
</pre></div>


<p>In your code you can import that table object and/or each generated column (Kotlin does not support a star &quot;*&quot; import in this case).
With these imports you can refer to the fields
in either a direct or qualified manner - &quot;id&quot; or &quot;TableCode.id&quot;.</p>

</div>
<div class="section">
<h2><a name="Usage_of_the_Mapper_Classes"></a>Usage of the Mapper Classes</h2>

<p>The following methods work the same as the other runtimes and we won't cover them here:</p>

<ul>
  
<li>Delete by Primary Key</li>
  
<li>Insert - will insert nulls</li>
  
<li>insert selective - ignores null properties</li>
  
<li>Select by Primary Key</li>
  
<li>Update by Primary Key - will set null values</li>
  
<li>Update by Primary Key Selective - ignores null values</li>
</ul>


<p>There are no &quot;by example&quot; methods. Instead, there are general purpose methods that allow you to specify a
where clause with a lambda.  The generator will create the following general:</p>

<ul>
  
<li>count</li>
  
<li>delete</li>
  
<li>select</li>
  
<li>selectDistinct</li>
  
<li>selectOne</li>
  
<li>update</li>
</ul>


<p>Each of these methods includes support for a very flexible WHERE clause that can be specified with a lambda. If you
don't need a where clauses, there are utility functions that mean &quot;all rows&quot;.</p>


<p>For example, you can retrieve the total number of rows in a table by calling the count method without a WHERE clause.
That code looks like this:</p>


<div>
<pre>
  val totalRows = mapper.count { allRows() }
</pre></div>



<p>You can retrieve all rows in a table by calling select without a WHERE clause like this:</p>


<div>
<pre>
  val allRecords = mapper.select { allRows() }
</pre></div>


<p>It is far more interesting to add WHERE clauses to these methods.  To add support for WHERE clauses, you should import the 
elements from the support class as shown above, and you should also import the SqlBuilder support.  Then you can code arbitrarily
complex where clauses, and &quot;ORDER BY&quot; phrases as shown below:</p>


<div>
<pre>
// import the generated &quot;support&quot; items...
import example.TableCodeDynamicSqlSupport.TableCode  
import example.TableCodeDynamicSqlSupport.TableCode.description
import example.TableCodeDynamicSqlSupport.TableCode.id

// import MyBatis Dynamic SQL where support
import org.mybatis.dynamic.sql.SqlBuilder.*

class SomeService {

    fun simpleWhere() {
        ...
        // Simple WHERE clause
        val records = mapper.select {
            where(id, isEqualTo(3))
        }
        ...
    }

    fun complexWhere1() {
        ...
        // Simple WHERE clause with OR
        val records = mapper.select {
            where(id, isEqualTo(3))
            or(description, isLike(&quot;f%&quot;))
        }
        ...
    }

    fun complexWhere2() {
        ...
        // complex WHERE and ORDER BY
        val records = mapper.select {
            where(id, isLessThan(10)) {
                and(description, isEqualTo(&quot;foo&quot;))
            }
            or(description, isLike(&quot;b%&quot;))
            orderBy(id.descending())
        }        
        ...
    }
}
</pre></div>

</div>
<div class="section">
<h2><a name="Update_Method_Usage"></a>Update Method Usage</h2>

<p>The generated update statement is very flexible. You can now create any arbitrary update,
as well as updates that mimic the old updateByExample and updateByExampleSelective methods.</p>


<div>
<pre>
// import the generated &quot;support&quot; items...
import example.TableCodeDynamicSqlSupport.TableCode  
import example.TableCodeDynamicSqlSupport.TableCode.description
import example.TableCodeDynamicSqlSupport.TableCode.id

// import MyBatis Dynamic SQL where support
import org.mybatis.dynamic.sql.SqlBuilder.*

class SomeService {

    fun simpleUpdate() {
        ...
        // Flexible update - no backing record needed
        val rows = mapper.update {
            set(id).equalTo(1)
            set(description).equalToNull()
            where(id, isEqualTo(3))
        }
        ...
    }

    fun updateByExample(record: TableCode) {
        ...
        // Update like the old updateByExample method
        val rows =  mapper.update {
            updateAllColumns(record)
            where(id, isEqualTo(3))
            or(description, isLike(&quot;f%&quot;))
        }
        ...
    }

    fun updateByExampleSelective(record: TableCode) {
        ...
        // Update like the old updateByExampleSelective method
        val rows =  mapper.update {
            updateSelectiveColumns(record)
            where(id, isEqualTo(3))
            or(description, isLike(&quot;f%&quot;))
        }
        ...
    }
}
</pre></div>

</div>
<div class="section">
<h2><a name="New_Plugins"></a>New Plugins</h2>

<p>Because the *ByExample methods are not generated, it no longer makes sense to control method generation via the properties
on an XML <tt>&lt;table&gt;</tt> configuration like <tt>enableInsert</tt>,
<tt>enableSelectByExample</tt>, etc. So this new runtime will ignore any of those properties. If you wish
to have this level of control over what is generated, you can accomplish that with a plugin. We have also included
the following plugins for general use with this runtime:</p>

<ul>
  
<li><tt>org.mybatis.generator.plugins.dsql.DisableDeletePlugin</tt> - disables all generated delete methods</li>
  
<li><tt>org.mybatis.generator.plugins.dsql.DisableInsertPlugin</tt> - disables all generated insert methods</li>
  
<li><tt>org.mybatis.generator.plugins.dsql.DisableUpdatePlugin</tt> - disables all generated update methods</li>
  
<li><tt>org.mybatis.generator.plugins.dsql.ReadOnlyPlugin</tt> - disables all generated delete, insert,
  and update methods</li>
</ul>

</div>

        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2006&#x2013;2019
<a href="http://www.mybatis.org/">MyBatis.org</a>.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
